window.bridges["generate-random-bitmap"]=function(){function C(t,e){return Math.random()*(e-t)+t}function R(t,e){if(0==e)return t;var i=colorToRGBA(t),r=e<0?0:255,o=Math.round((r-i.r)*-e)+i.r,n=Math.round((r-i.g)*-e)+i.g,h=Math.round((r-i.b)*-e)+i.b;return"rgba({0}, {1}, {2}, {3})".format(o,n,h,i.a/255)}return{converter:function(){var t=this,e=t.options.get(),i=+e.size;(!i||i<1)&&(i=5);for(var r=(e.colors||"").split("\n"),o=[],n=0;n<r.length;n++)isColorValid(r[n])&&o.push(r[n]);var h=e.shade,a=+e["shade-threshold"];isNaN(a)&&(t.output.showWarningBadge("Incorrect threshold",e["shade-threshold"]+" is not a valid number.",-1),a=0),d=a,l=0,f=1,u=d,d<l&&(u=l),f<d&&(u=f),a=u;var d,l,f,u;var g=t.output.element.querySelector(".data"),s=t.output.element.querySelector(".preview"),c=g.getContext("2d"),w=+e.width,p=+e.height;g.width=w||s.clientWidth,g.height=p||s.clientHeight;var v,b,m,M=e.background||"transparent";c.fillStyle=M,c.clearRect(0,0,g.width,g.height),c.fillRect(0,0,g.width,g.height);for(n=0;n<=g.width;n+=i)for(var y=0;y<=g.height;y+=i){var S=(m=o)[Math.floor(Math.random()*m.length)]||(b=v=void 0,v=function(t,e){return Math.round(C(t,e))}.bind(null,0,255),b=C.bind(null,0,1),"rgba({0}, {1}, {2}, {3})".format(v(),v(),v(),b().toFixed(2)));h&&(S=h?R(S,C(-a,a)):S),c.fillStyle=S,c.fillRect(n,y,i,i)}t.respond(),s.width=s.clientWidth,s.height=s.clientHeight,function(t){for(var e=t.getContext("2d"),i=t.width,r=t.height,o=!0,n=0;n<=i;n+=15)for(var h=0;h<=r;h+=15)e.fillStyle=o?"#ffffff":"#efefef",o=!o,e.fillRect(n,h,n+15,h+15)}(s);var x=best_image_fit(g.width,g.height,s.width,s.height);s.getContext("2d").drawImage(g,x.offsetX,x.offsetY,x.width,x.height),t.output.showStatus(g.width+"Ã—"+g.height)},config:{type:"image",output:{download:function(){return this.options.get().extension||"png"},noClipboard:!0}}}};