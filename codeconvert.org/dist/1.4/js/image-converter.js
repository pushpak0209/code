$(document).ready(function(){$(".editorCounterSection").addClass("hide");var o,e=$("#viewName").val();function r(e){if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){$("#preimage").attr("src",e.target.result)},a.readAsDataURL(e.files[0])}}$("#"+e).addClass("currentselected"),$("#file-select").on("change",function(e){var a=e.target.files[0];a.type==$("#sourceMime").val()?(o=a,$("input[type=checkbox]").attr("checked")&&$("#convertImage").click(),r(this)):openErrorDialog("Selected file is not a "+$("#sourceExt").val())}),$("#drag-and-drop").on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(e){e.preventDefault(),e.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(e){e.preventDefault(),e.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(e){e.preventDefault(),e.stopPropagation(),$("#drag-and-drop").removeClass("hover"),e.dataTransfer=e.originalEvent.dataTransfer;var a=e.dataTransfer.files[0];a.type==$("#sourceMime").val()?($("#drag-and-drop-selected").text("Selected "+a.name),o=a,$("input[type=checkbox]").attr("checked")&&$("#convertImage").click(),r(e.dataTransfer)):openErrorDialog("Selected file is not a "+$("#sourceExt").val())}),$("#convertImage").click(function(){var e=new FileReader;$("#convertImage").val("Please Wait...."),e.onload=function(){var a=new Image;a.onload=function(){var e=$("<canvas>")[0];e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0),e.toBlob(function(e){var a=o.name.lastIndexOf(".");if(-1!=a)var r=o.name.substring(0,a)+"."+$("#targetExt").val();else r=o.name+"."+$("#targetExt").val();fileDownloadCB(e,r);var t=$("#targetExt").val();$("#convertImage").val("Convert to "+t.toUpperCase())},$("#targetMime").val())},a.src=e.result},e.readAsDataURL(o)}),$("body").removeAttr("id")});