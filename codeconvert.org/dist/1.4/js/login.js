var globalurl="/";function updateUserSession(e){$.ajax({type:"post",url:"/service/updateSession",data:{id:e},success:function(e){}})}function getCookie(e){for(var o=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(o))return(o=a.substring(o.length,a.length)).replace(/\+/g," ")}return""}function loadJs(e){var o=document.createElement("script");o.type="text/javascript",o.src=globalurl+"js/"+e+".js",o.onload=function(){console.log("Loaded script"),console.log(this)},document.head.appendChild(o)}function loginWithSocial(e,o){$("#logFail").text(""),hello(e).login({display:"page",scope:"email"}).then(function(){},function(e){openErrorDialog("Signin error: "+e.error.message)})}$(document).ready(function(){if(-1<window.location.href.indexOf("logout"))logout();else{var e=getCookie("loggedinuser"),o=getCookie("loggedinuserid");""!=e&&""!=o?($("#usernamelable").text(e.substring(0,5)+".."),$("#notloggedin").hide(),$("#loggedin").show(),updateUserSession(o),isfavourite()):check_login()}});var online=function(e){var o=(new Date).getTime()/1e3;return e&&e.access_token&&e.expires>o};function check_login(){var e=getProvider();null!=e?(getLogindata(e),$("#loggedin").show()):($("#loggedin").hide(),$("#notloggedin").show(),$("#user_id").val("0"),createFavouriteImg())}function getProvider(){hello.init({facebook:"1379987838916043",google:"1029680282693-o1r44fbtem67h8op2l8g6kiq82cr679c.apps.googleusercontent.com",github:"<?php echo GITHUB_ID_TEST; ?>"});var e=null,o=hello("facebook").getAuthResponse(),t=hello("google").getAuthResponse(),i=hello("github").getAuthResponse();return online(o)?e="facebook":online(t)?e="google":online(i)&&(e="github"),e}function getLogindata(o){hello(o).api("me").then(function(e){null!=e.email&&0!=e.email.length?(null!=e.name&&0!=e.name.length||(e.name=e.email),$.ajax({url:"/service/saveLoginData",dataType:"text",type:"post",data:{name:e.name,email:e.email,provider:o},success:function(e){window.location.href="/codeconvert_redirect"},error:function(e,o,t){openErrorDialog("Failed to Login, Pls Try Again")}})):openErrorDialog("Email id required for login,please try again")},function(e){console.log("getLogindata "+e.error.message)})}function logout(){document.cookie="loggedinuser=; expires=Thu, 01 Jan 1970 00:00:00 UTC",null!=getProvider()&&hello(getProvider()).logout().then(function(){},function(e){}),$.ajax({url:"/service/logout",success:function(e){window.location.href="/codeconvert_redirect"}})}function createFavouriteImg(){$("#favToolImg").remove();var e=$("#isFavTool").val(),o=$("<i>");o.attr("id","favToolImg"),$(o).css("cursor","pointer"),o.attr("aria-hidden",!0),"fav"==e?(o.addClass("icon-star-full"),o.attr("title","make it not favourite")):(o.addClass("icon-star-empty"),o.attr("title","make it favourite"),0==e.trim().length&&$("#isFavTool").val("not-fav")),$(o).click(function(){$("#notloggedin").is(":visible")?login():saveMyfavourite()}),$("#subTitle").append(o)}function saveMyfavourite(){$.ajax({url:"/service/saveFavouriteTool",dataType:"text",type:"post",data:{view:$("#viewName").val(),title:$("#subTitle").text(),isFav:$("#isFavTool").val()},success:function(e){var o="This tool added to favourite.";$("#favToolImg").attr("src","../img/icons/fav.png"),"fav"==$("#isFavTool").val()?(o="This tool remove from favourite.",$("#favToolImg").attr("src","../img/icons/not-fav.png"),$("#isFavTool").val("not-fav")):$("#isFavTool").val("fav"),$("#copy-note-msg").html(o),$("#copy-note-msg").removeClass("hide"),$("#copy-note-msg").fadeIn().delay(1e4).fadeOut()},error:function(e,o,t){openErrorDialog("Failed to save favourite tool, Pls Try Again")}})}function isfavourite(){$.ajax({url:"/service/isFavouriteTool",dataType:"text",type:"post",data:{view:$("#viewName").val()},success:function(e){$("#isFavTool").val(e),createFavouriteImg()},error:function(e,o,t){console.log(e)}})}function toggleOpenClass(){document.getElementById("myDropdown").classList.toggle("show")}function login(e){null==e?($("#logFail").text(""),$("#username_txt1").val(""),$("#email_txt1").val(""),$("#pass_txt1").val(""),$("#pass_txt").val(""),$("#email_txt").val(""),$("#signinDiv").show(),$("#signupDiv").hide()):$("#logFail").text(e),$("#customLogin").dialog({modal:!0,width:"auto",draggable:!1,height:"auto",title:"LOGIN",autoOpen:!0,resizable:!1}),$("#customLogin1").dialog({modal:!0,width:"auto",draggable:!1,height:"auto",title:"LOGIN",autoOpen:!0,resizable:!1}),$(".ui-dialog-titlebar-close").hide(),$(".ui-dialog .ui-dialog-titlebar").hide()}function customLogin(){var e=$("#email_txt").val(),o=$("#pass_txt").val(),t=$("#is_cblogin").val();if(""==e.trim()||""==o.trim())return openErrorDialog("Please Enter the Email and Password"),!1;$("#logFail").text(""),"1"!=t&&$("#customLogin").dialog("destroy"),$.ajax({url:"/service/login",dataType:"text",type:"post",data:{email:e,password:o},success:function(e){if("success"==e)t?location.href="/":location.reload();else{login("Invalid username and password")}},error:function(e,o,t){openErrorDialog("Failed to Login Pls Try Again")}})}function customSignup(){var e=$("#email_txt1").val(),o=$("#pass_txt1").val(),t=$("#username_txt1").val();if(""==e.trim()||""==o.trim()&&""==t.trim())return openErrorDialog("Please Enter the required information"),!1;$("#logFail").text(""),$("#customLogin").dialog("destroy"),$.ajax({url:"/service/signup",dataType:"text",type:"post",data:{username:t,email:e,password:o},success:function(e){"success"==e?location.reload():"duplicateEmail"==e.trim()?login("Email Id is already registered...."):login("Failed to Create an Account, Pls Try Again")},error:function(e,o,t){openErrorDialog("Failed to Login, Pls Try Again")}})}function signupView(){$("#signinDiv").hide(),$("#signupDiv").show()}function checkEmail(e){if(null!=$("#"+e).val()&&""!=$("#"+e).val()){var o=document.getElementById(e);return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o.value)?$("#logFail").text(""):($("#logFail").text("Please provide a valid email address"),$("#"+e).focus()),!1}}function ylogin(){$("#yloginsection").dialog({modal:!0,title:"Why you need to Login Or Register ?",zIndex:1e4,autoOpen:!0,width:"auto",resizable:!1})}window.onclick=function(e){if(!e.target.matches(".dropbtn")){var o,t=document.getElementsByClassName("dropdown-content");for(o=0;o<t.length;o++){var i=t[o];i.classList.contains("show")&&i.classList.remove("show")}}};
