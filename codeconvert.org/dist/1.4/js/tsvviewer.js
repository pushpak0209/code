function setToEditor(e) { editorAce.setValue(e)}function tsvTojson(e){var t=editorAce.getValue();if(0==t.trim().length)return!1;var r=t.replace(/['"]/g,"").split("\n"),i=r.shift().split("\t"),o=[];return $.each(r,function(e,t){var r=t.split("\t"),n={};$.each(r,function(e,t){n[i[e].replace("\r","")]=removeQuotes(t)}),o.push(n)}),null==e?(editorResult.setValue(vkbeautify.json(o)),!1):o}function removeQuotes(e){return e=e.replace(/(['"])/g,"\\$1"),isNaN(e)||(e=parseFloat(e)),e}function jsonTotsv(e,t){var r=editorAce.getValue(),n=jsonTocsvbyjson(r,!0);console.log(n);var i=getCSVTOTSV(n);return null==e?(editorResult.setValue(i),!1):i}function addQuotes(e){return isNaN(e)?'"'+e+'"':e}function tsvTohtml(){var e=editorAce.getValue();if(0==e.trim().length)return!1;e=getTSVTOCSV(e),toHTML(e,"tsvToHtmlData")}function htmlTotsv(){var e=editorAce.getValue();if(0==e.trim().length)return!1;$("#templTableDiv").html(e.replace(/<script/gim,"<xxxxx"));var t=[],r="";$("#templTableDiv table th").each(function(){t.push($(this).text().toLowerCase())}),$("#templTableDiv table tr").each(function(e){var t=[];$(this).find("td").each(function(e){t.push($(this).text().toLowerCase())}),r+=t.join()+"\n"}),editorResult.setValue(getCSVTOTSV(t.join()+r))}function tsvToxml(){var e=CSV2JSON(getTSVTOCSV());if(0==e)return!1;var t,r=(new XML.ObjTree).writeXML($.parseJSON(e));r=decodeSpecialCharacter(r);try{t=$.parseXML(r)}catch(e){t=!1}0==t&&(r=r.substr(0,39)+"<root>"+r.substr(39)+"</root>"),editorResult.setValue(vkbeautify.xml(r))}function xmlTotsv(){var e=editorAce.getValue();if(0==e.trim().length)return!1;if("undefined"!=typeof X2JS){var t=new X2JS;e=$.parseXML(e);var r=t.xml2json(e),n=jsonTocsvbyjson(r,!0);editorResult.setValue(getCSVTOTSV(n))}else $.loadScript("https://cdnjs.cloudflare.com/ajax/libs/x2js/1.2.0/xml2json.min.js",function(){xmlTotsv()})}function defaultAction(){}function tsvTocsv(){var e=editorAce.getValue();if(0==e.trim().length)return!1;editorResult.setValue(getTSVTOCSV(e))}function csvTotsv(){var e=editorAce.getValue();if(0==e.trim().length)return!1;editorResult.setValue(getCSVTOTSV(e))}function getTSVTOCSV(){var e=editorAce.getValue();return 0!=e.trim().length&&e.split("\t").join(",")}function getCSVTOTSV(e){return e.split(",").join("\t")}$(document).ready(function(){viewname=$("#viewName").val().trim(),"tsv-to-json-converter"==viewname?(createEditor("text","json"),setViewTitle("Online TSV TO JSON Converter",!0,!0)):"json-to-tsv-converter"==viewname?(createEditor("json","text"),setViewTitle("Online JSON TO TSV Converter",!0,!0)):"tsv-to-xml-converter"==viewname?(createEditor("text","xml"),setViewTitle("Online TSV TO XML Converter",!0,!0)):"xml-to-tsv-converter"==viewname?(createEditor("xml","text"),setViewTitle("Online XML TO TSV Converter",!0,!0)):"tsv-to-csv-converter"==viewname?(createEditor("text","csv"),setViewTitle("Online TSV TO CSV Converter",!0,!0)):"csv-to-tsv-converter"==viewname?(createEditor("csv","text"),setViewTitle("Online CSV TO TSV Converter",!0,!0)):"tsv-to-html-converter"==viewname?(createEditor("text","html"),setViewTitle("Online TSV TO HTML Converter",!0,!0)):"html-to-tsv-converter"==viewname&&(createEditor("html","text"),setViewTitle("Online HTML TO TSV Converter",!0,!0))});